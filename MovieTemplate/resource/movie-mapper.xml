<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="movieMapper">

	<insert id="save" 
			parameterType="com.kh.statement.model.vo.Movie">
    INSERT 
      INTO 
           MOVIE 
           (
	        MOVIE_ID,
	        TITLE,
	        DIRECTOR,
	        GENRE,
	        RELEASE_DATE,
	        RATING,
	        DURATION,
	        BOX_OFFICE
	    ) VALUES (
	        #{movieId},
	        #{title},
	        #{director},
	        #{genre},
	        SYSDATE,
	        #{rating},
	        #{duration},
	        #{boxOffice}
		    )
	</insert>
	
	<select id="findAll" 
			resultType="com.kh.statement.model.vo.Movie">
    	SELECT
        	   MOVIE_ID
		     , TITLE
		     , DIRECTOR
		     , GENRE
		     , RELEASE_DATE
		     , RATING
		     , DURATION
		     , BOX_OFFICE
		  FROM 
		       MOVIE
		 ORDER 
		    BY 
		       MOVIE_ID DESC
	</select>
	
	<select id="findByTitle"
			resultType="com.kh.statement.model.vo.Movie">
		SELECT
		       MOVIE_ID
		     , TITLE
		     , DIRECTOR
		     , GENRE
		     , RELEASE_DATE
		     , RATING
		     , DURATION
		     , BOX_OFFICE
		 FROM
		      MOVIE
		WHERE
		      TITLE = #{title}
	</select>
	
	<select id="findByKeyword"
			resultType="com.kh.statement.model.vo.Movie">
		SELECT
		       MOVIE_ID
		     , TITLE
		     , DIRECTOR
		     , GENRE
		     , RELEASE_DATE
		     , RATING
		     , DURATION
		     , BOX_OFFICE
		 FROM
		       MOVIE
		 WHERE
		       TITLE LIKE '%' || #{title} || '%'
		 ORDER
		    BY
		       MOVIE_ID DESC
	</select>
	
	<update id="update" 
			parameterType="com.kh.statement.model.dto.MovieDTO">
    UPDATE 
     	   MOVIE
	   SET 
	       TITLE = #{newTitle}
	 WHERE
	       TITLE = #{title}
 	</update>
 	
 	<delete id="delete" 
 			parameterType="string">
    	DELETE 
    	  FROM 
    	       MOVIE
         WHERE 
               TITLE = #{title}
</delete>

	
</mapper>
